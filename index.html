<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>The RCL Configuration Language</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:ital,wght@0,300..900;1,300..900&family=Red+Hat+Mono:ital,wght@0,300..700;1,300..700&family=Red+Hat+Text:ital,wght@0,300..700;1,300..700&display=swap" rel="stylesheet">
  <style>
  * {
    margin: 0;
    padding: 0;
    border-spacing: 0;
  }

  html {
    background-color: var(--oxford-blue);
    color: #fff;
    font-family: 'Red Hat Text', sans-serif;
    font-optical-sizing: auto;
    font-size: 18px;
    line-height: 1.5;

    --margin-small: 1.3rem;
    --margin: 2.5rem;
    --margin-large: 3.2rem;
    --bullet-distance: -1.0rem;
    --outset: -0.5rem;
    --hsep: 1px;
    --vsep: 0px;

    /* Colors: https://coolors.co/000f29-033563-f5e5b8-7b0d1e-9f2042 */
    --oxford-blue: #000f29ff;
    --berkeley-blue: #033563ff;
    --dutch-white: #f5e5b8ff;
    --burgundy: #7b0d1eff;
    --amaranth-purple: #9f2042ff;

    --off-white: #fafaf9;
    --text-light: #335184;
    --text-lighter: #36d;

    --syn-error: #f25a0b;
    --syn-accent: #ffd07e;
    --syn-red: #ff7e7e;
    --syn-blue: #4ccae5;
    --syn-light-blue: #81baf7;

    --link-blue: #4ccae577;
    --outline: #ffffff44;
  }

  .grid {
    display: grid;
    grid-template-columns: var(--margin) calc(100% - 2 * var(--margin)) var(--margin);
    grid-template-areas: "lmargin content rmargin";
  }

  .span-full, .span-l2, .span-r2 { grid-column: content }

  @media (min-width: 500px) {
    .xnarrow {
      display: none;
    }
  }

  @media (min-width: 600px) {
    html {
      --margin: 3.2rem;
      --margin-large: 4rem;
      --bullet-distance: -1.2rem;
      --outset: -1.2rem;
    }
    .narrow {
      display: none;
    }
  }

  @media (min-width: 820px) {
    html {
      /* The separator rotates 90 degrees now. */
      --hsep: 0px;
      --vsep: 1px;
    }
    .xnarrow, .narrow {
      display: inline;
    }
    .grid {
      grid-template-columns: var(--margin) 1fr 1fr 1fr 1fr var(--margin);
      grid-template-areas: "lmargin c1 c2 c3 c4 rmargin";
    }
    .span-full {
      grid-column: c1-start / c4-end
    }
    .span-l2 { 
      grid-column: c1-start / c2-end;
      padding-right: var(--margin);
    }
    .span-r2 {
      grid-column: c3-start / c4-end;
      padding-left: var(--margin);
    }
  }

  @media (min-width: 910px) {
    .xnarrow {
      display: none;
    }
  }

  @media (min-width: 1000px) {
    .narrow {
      display: none;
    }
    .grid {
      grid-template-columns: auto 12rem 12rem 12rem 12rem auto;
    }
  }

  @media (min-width: 1200px) {
    html {
      font-size: 20px;
    }
  }

  h1 {
    font-family: 'Red Hat Display', sans-serif;
    font-size: 1rem;
  }

  a {
    text-decoration: none;
    color: inherit;
  }

  header {
    padding-top: var(--margin-small);
    padding-bottom: var(--margin-small);
    word-spacing: 1rem;
  }

  header h1 {
    font-weight: 900;
    display: inline;
  }

  section {
    overflow: hidden;
    background: var(--berkeley-blue);
    color: #eef;
    padding-top: var(--margin-large);
  }

  section.alt {
    background: var(--off-white);
    color: var(--text-light);
  }

  h1.tagline {
    color: #fff;
    font-size: 2.5rem;
    line-height: 2.4rem;
    font-weight: 700;
    margin-bottom: 2rem;
  }

  ul li {
    position: relative;
    list-style-type: none;
  }

  ul li:before {
    color: #ffffff66;
    position: absolute;
    left: var(--bullet-distance);
    content: '•';
  }

  h2 {
    font-size: 1.3rem;
    font-weight: 400;
    margin-bottom: 0.5rem;
  }

  p, pre, ul {
    margin-bottom: var(--margin-large);
  }

  section a {
    border-bottom: 3pt solid var(--link-blue);
    line-height: 1rem;
    display: inline-block;
  }

  section.alt h2 {
    color: var(--text-lighter);
  }

  section.alt a {
    color: var(--berkeley-blue);
  }

  p.warning strong {
    margin-right: 0.2rem;
  }

  span.cc {
    font-weight: 600;
  }

  code, pre {
    font-family: 'Red Hat Mono', monospace;
    font-size: 0.88rem;
  }

  .demo {
    margin-left: var(--outset);
    margin-right: var(--outset);
    margin-top: -1rem;
    margin-bottom: 0;
    display: grid;
    grid-template-columns: subgrid;
    background-color: #00000066;
    border: 1px solid var(--outline);
    border-radius: 0.2rem;
    overflow: hidden;
  }

  .demo h3 {
    font-weight: inherit;
    font-size: 0.8rem;
    color: var(--outline);
    padding: 0.5rem;
    padding-left: 1.2rem;
    border-bottom: 1px solid var(--outline);
  }

  .demo .span-l2, .demo .span-r2 {
    padding: 0;
    overflow-x: auto;
  }

  .demo .span-r2 {
    /* This switches between top and left depending on the viewport width,
       see the media query elsewhere. */
    border-top: var(--hsep) solid var(--outline);
    border-left: var(--vsep) solid var(--outline);
  }

  .demo .span-l2 {
    border: 3px solid transparent;
  }
  .demo .span-l2:has(code:focus-visible) {
    border: 3px solid var(--outline);
  }
  .demo pre code:focus-visible {
    outline: none;
  }

  .demo pre {
    width: min-content;
    /* The regular margin is a bit much for the snippet,
       instead apply the small margin twice. */
    padding: var(--margin-small);
    margin-bottom: var(--margin-small);
  }

  .demo pre code {
    display: block;
    padding-top: var(--margin-small);
    padding-left: var(--margin-small);
    padding-right: 1.5rem;
  }

  p.arrow {
    margin-top: -1.1rem;
    margin-bottom: var(--margin);
    text-align: center;
    /* The code is not 100% wide, so the arrow looks better aligned when it's
       a bit to the left and not truly in the center. */
    width: 85%;
  }

  .code-demo {
    background-color: var(--oxford-blue);
    margin-bottom: var(--margin-large);
    margin-right: -2.2rem;
    padding: 1.5rem;
    color: #fff;
    border-top-left-radius: 0.3rem;
    border-bottom-left-radius: 0.3rem;
  }

  .code-demo pre {
    margin-bottom: 0
  }

  code span.highlight { font-weight: 600; }
  code span.error { font-weight: 600; color: var(--syn-error); }
  code span.warning { font-weight: 600; color: var(--syn-accent); }
  code span.keyword { font-weight: 600; color: var(--syn-light-blue); }
  code span.comment { font-style: italic; opacity: 0.6; }
  code span.type { color: var(--syn-accent); }
  code span.string { color: var(--syn-red); }
  code span.field { color: var(--syn-accent); }
  code span.number { color: var(--syn-blue); }

  footer {
    padding-top: var(--margin-large);
    opacity: 0.6;
  }
  </style>
  <script src="/rcl.js" defer></script>
</head>
<body>
  <header class="grid">
    <nav class="span-full">
      <a href="/"><h1>RCL</h1></a>
      <a href="https://docs.ruuda.nl/rcl">Docs</a>
      <a href="https://github.com/ruuda/rcl">GitHub</a>
      <a href="https://codeberg.org/ruuda/rcl">Codeberg</a>
    </nav>
  </header>
  <section class="grid">
    <div class="span-l2">
      <h1 class="tagline">Make<br>configuration<br>boring again</h1>
      <p>RCL is a domain-specific language for specifying human-written
      data with just enough abstraction to avoid repetition.
      It extends json into a simple functional programming
      language that resembles Python and Nix.</p>
    </div>
    <div class="span-r2">
      <pre><code>{
  <span class="comment">// A silly snippet to show some</span>
  <span class="comment">// features in a limited space.</span>
  <span class="keyword">let</span> data: <span class="type">List</span>[<span class="type">String</span>] = <span class="narrow">
    </span><span class="keyword">import</span> <span class="string">"data.rcl"</span>;
  <span class="keyword">let</span> f = () => [<span class="xnarrow">
    </span><span class="string">"List"</span>, <span class="xnarrow">
    </span><span class="string">"Dict"</span>, <span class="xnarrow">
    </span><span class="string">"Set"</span><span class="xnarrow">
  </span>];
  <span class="keyword">assert</span>
    data.contains(<span class="string">"Assertions"</span>),
    <span class="string">"Assertions are supported"</span>;
  <span class="field">features</span> = [
    <span class="keyword">for</span> d <span class="keyword">in</span> data: d,
    <span class="keyword">for</span> collection <span class="keyword">in</span> f():
    <span class="string">f"{</span>collection<span class="string">} comprehensions"</span>,
  ],
  <span class="field">export-to</span> = <span class="string">"json, yaml, toml, ..."</span>,
}</code></pre>
    </div>
    <div class="span-full">
      <p class="warning"><strong>Note!</strong> RCL is a hobby project without stability promise.
      It is usable, but also experimental and incomplete.</p>
    </div>
  </section>
  <section class="grid alt">
    <div class="feature-block span-l2">
      <h2>Connect anything</h2>
      <p>Generate configuration for tools that do not natively talk to each other,
      all from a single source of truth.</p>
    </div>
    <div class="feature-block span-r2">
      <h2>Remove repetition</h2>
      <p>Stop copy-pasting.
      Use variables, list comprehensions, and functions to avoid duplication.
      Bump <span class="cc">ubuntu-20.04</span> to <span class="cc">24.04</span>
      in <em>one</em> place instead of 137.</p>
    </div>
    <div class="feature-block span-l2">
      <h2>Fight complexity, not tools</h2>
      <p>Spend time building your infrastructure,
      not debugging whitespace and escaping issues in your string templates.
      Generate correct yaml, json, and toml.
      </p>
    </div>
    <div class="feature-block span-r2">
      <h2>Familiar syntax</h2>
      <p>Have you used Python or TypeScript before?
      Then you will find RCL obvious to read and natural to write.
      </p>
    </div>
    <div class="feature-block span-l2">
      <h2>Built-in json queries</h2>
      <p>Need to drill down into a json document,
      but can’t figure out the <span class="cc">jq</span> syntax?
      Try <a href="https://docs.ruuda.nl/rcl/rcl_query/"><span class="cc">rcl query</span></a> instead.
      Scroll down for an example.
      </p>
    </div>
    <div class="feature-block span-r2">
      <h2>Python module</h2>
      <p>You can always export json from the command line
      and load it into your program.
      For Python we can skip that intermediate stage:
      <a href="https://docs.ruuda.nl/rcl/python_bindings/#loads"><span class="cc">rcl.loads</span></a>
      is a drop-in replacement for <span class="cc">json.loads</span>.
    </div>
  </section>
  <section class="grid">
    <div class="span-full">
      <h2>Try it yourself</h2>
      <p>Below is a
      <a href="https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/record">simplified form</a> of a
      <a href="https://developer.hashicorp.com/terraform/language/syntax/json">Terraform json config</a>
      that defines two DNS records pointing to the same address.
      <strong>This code is editable.</strong>
      How would you change it to emit records for multiple zones?
      Try uncommenting the <span class="cc">zone_id</span> loop.</p>
      <noscript>
      <p><span class="cc">You need to enable Javascript to use the live demo.</span>
      It runs a WebAssembly version of RCL in your browser.
      No server ever sees your keystrokes.
      This is the only script on the page,
      there are no trackers or other malware.
      The RCL code is open source,
      and the scripts on this page are not obfuscated
      so you can verify them yourself.</p>
      </noscript>
    </div>
    <div class="span-full demo">
    <div class="span-full">
      <h3>rcl evaluate --format=json</h3>
    </div>
    <div class="span-l2">
      <pre><code id="input" contenteditable spellcheck="false">let base_config = {
  zone_id = 42,
  type = "A",
  value = "93.184.216.34",
};
{
  let zone_id = base_config.zone_id;
  // for zone_id in [42, 1337]:
  for subdomain in ["docs", "www"]:
  f"a_record_{subdomain}_{zone_id}":
  base_config | { name = subdomain }
}</code></pre>
    </div>
  <div class="span-r2">
    <!--<p class="arrow">↓</p>-->
    <pre id="output"><code>{
  <span class="field">"a_record_docs_42"</span>: {
    <span class="field">"name"</span>: <span class="string">"docs"</span>,
    <span class="field">"type"</span>: <span class="string">"A"</span>,
    <span class="field">"value"</span>: <span class="string">"93.184.216.34"</span>,
    <span class="field">"zone_id"</span>: <span class="number">42</span>
  },
  <span class="field">"a_record_www_42"</span>: {
    <span class="field">"name"</span>: <span class="string">"www"</span>,
    <span class="field">"type"</span>: <span class="string">"A"</span>,
    <span class="field">"value"</span>: <span class="string">"93.184.216.34"</span>,
    <span class="field">"zone_id"</span>: <span class="number">42</span>
  }
}
</code></pre>
    </div></div>
  </section>
  <section class="grid">
    <div class="span-full">
      <h2>Installation</h2>
      <p>
      RCL is written in Rust and has few dependencies,
      so it is quick and easy to build from source with Cargo.
      There is no need to pipe arbitrary code from the web into your shell.
      <br><br>
      <code>
        <span class="field">$</span>
        git clone https://github.com/ruuda/rcl<br>
        <span class="field">$</span>
        cargo build --release<br>
        <span class="field">$</span>
        target/release/rcl --help
      </code></p>
    </div>
  </section>
  <section class="grid alt">
    <div class="code-demo span-r2"><pre><code><span class="field">$</span> curl --silent <wbr/>https://api.vultr.com/v2/regions <wbr
/>
| rcl query <wbr/><span class="highlight">'input<wbr/>.regions<wbr/>.key_by(<wbr/>r =&gt; r.id)<wbr/>.nrt'</span>

{
  <span class="field">city</span> = <span class="string">"Tokyo"</span>,
  <span class="field">continent</span> = <span class="string">"Asia"</span>,
  <span class="field">country</span> = <span class="string">"JP"</span>,
  <span class="field">id</span> = <span class="string">"nrt"</span>,
  <span class="field">options</span> = [
    <span class="string">"ddos_protection"</span>,
    <span class="string">"block_storage_high_perf"</span>,
    <span class="string">"block_storage_storage_opt"</span>,
    <span class="string">"load_balancers"</span>,
    <span class="string">"kubernetes"</span>,
  ],
}
</code></pre></div>
    <div class="feature-block span-l2">
      <h2>Free &amp; open source</h2>
      <p>RCL is free/libre software,
      licensed under the Apache 2.0 license.
      The source code is available on
      <a href="https://github.com/ruuda/rcl">GitHub</a> and
      <a href="https://codeberg.org/ruuda/rcl">Codeberg</a>.</p>
    </div>
  </section>
  <footer class="grid">
    <div class="span-full">
      <p>Copyright 2024 <a href="https://ruudvanasseldonk.com">Ruud van Asseldonk</a></p>
    </div>
  </footer>
</body>
<script>
  window.onload = function() {
    const { rcl_evaluate } = wasm_bindgen;
    async function run() {
      await wasm_bindgen();
      const input_box = document.getElementById("input");
      const output_box = document.getElementById("output");
      input_box.addEventListener("input", (evt) => {
        const input = evt.target.value;
        const out_node = document.createElement("code");
        rcl_evaluate(input_box.textContent, out_node);
        output_box.replaceChild(out_node, output_box.firstChild);
      });
    }
    run();
  }
</script>
</html>
